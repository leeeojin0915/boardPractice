<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.eojin.board.web.mapper.board.BoardMapper">
    <sql id="sql_selectBoard">
        SELECT BOARD_ID,
               BOARD_TYPE,
               TITLE,
               CONTENT,
               AUTHOR,
               DELETE_YN,
               CREATE_DATE,
               UPDATE_DATE
        FROM BOARD
    </sql>

    <sql id="sql_selectBoard_where">
        <where>
            AND BOARD_ID = #{board_id}
        </where>
    </sql>

    <select id="selectBoardList" resultType="BoardDto">
        <include refid="sql_selectBoard"></include>
        WHERE DELETE_YN = 'N'
    </select>

    <select id="selectBoardOne" resultType="BoardDto" parameterType="String">
        <include refid="sql_selectBoard"></include>
        <include refid="sql_selectBoard_where"></include>
    </select>

    <insert id="insertBoard" parameterType="BoardDto" useGeneratedKeys="true" keyProperty="boardId">
        INSERT INTO BOARD
        (BOARD_TYPE,
         TITLE,
         CONTENT,
         AUTHOR,
         DELETE_YN,
         CREATE_DATE,
         UPDATE_DATE)
        VALUES (#{boardType},
                #{title},
                #{content},
                #{author},
                'N',
                NOW(),
                #{updateDate})
    </insert>

    <update id="updateBoard" parameterType="BoardDto">
        UPDATE BOARD
        SET TITLE       = #{title},
            CONTENT     = #{content},
            UPDATE_DATE = NOW()
        WHERE BOARD_ID = #{boardId}
    </update>

    <update id="deleteBoard" parameterType="int">
        UPDATE BOARD
        SET DELETE_YN = 'Y'
        WHERE BOARD_ID = #{boardId}
    </update>
</mapper>